<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@500;700;900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Color+Emoji&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="popup.css" />
    <title>饅頭顏文字小工具</title>
  </head>
  <body>
    <input type="file" id="importInput" accept=".json" style="display: none" />

    <div class="container">
      <!-- Main Tabs -->
      <div class="main-tabs" id="mainTabs">
        <button class="main-tab active" data-type="kaomoji">顏文字</button>
        <button class="main-tab" data-type="symbols">符號</button>
        <button class="main-tab" data-type="emoji">Emoji</button>
      </div>

      <!-- Header -->
      <div class="header">
        <div class="random-wrapper">
          <div id="randomDisplay" class="random-kaomoji" title="點擊切換">
            Loading...
          </div>
          <button id="copyRandomBtn" class="copy-random-btn" title="複製">
            <i class="fa-regular fa-copy"></i>
          </button>
        </div>

        <div class="search-box">
          <i class="fa-solid fa-magnifying-glass search-icon"></i>
          <input type="text" id="searchInput" placeholder="搜尋..." />
          <button id="clearSearch"><i class="fa-solid fa-xmark"></i></button>
        </div>
      </div>

      <!-- Tabs -->
      <div class="category-wrapper" id="categoryWrapper">
        <div class="category-tabs" id="categoryTabs"></div>
      </div>

      <!-- Content -->
      <div class="kaomoji-grid-wrapper">
        <div class="kaomoji-grid" id="kaomojiGrid"></div>
      </div>

      <!-- Footer -->
      <div class="footer">
        <div id="copyMessage" class="copy-message">
          <i class="fa-solid fa-check"></i> 已複製
        </div>

        <div class="footer-controls">
          <div class="btn-group">
            <button id="infoBtn" class="btn-icon" title="關於">
              <i class="fa-solid fa-circle-info"></i>
            </button>
          </div>

          <div class="action-buttons">
            <div class="btn-group">
              <button
                id="clearHistory"
                class="btn-icon danger"
                title="清除紀錄"
              >
                <i class="fa-solid fa-trash-can"></i>
              </button>
              <button id="importBtn" class="btn-icon" title="匯入">
                <i class="fa-solid fa-file-import"></i>
              </button>
              <button id="exportBtn" class="btn-icon" title="匯出">
                <i class="fa-solid fa-file-export"></i>
              </button>
            </div>
            <button id="addKaomoji" class="btn-pill primary" title="新增">
              <i class="fa-solid fa-plus"></i> 新增
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Add/Edit Modal -->
    <div id="addModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modalTitle">
            <i class="fa-solid fa-pen-to-square"></i> 新增顏文字
          </h3>
          <button class="close-btn" id="closeModal">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>顏文字符號</label>
            <textarea
              id="kaomojiSymbol"
              placeholder="( ˘•ω•˘ )"
              rows="2"
            ></textarea>
          </div>
          <div class="form-group">
            <label>分類</label>
            <div class="select-wrapper">
              <select id="kaomojiCategory">
                <option value="">選擇分類</option>
              </select>
            </div>
            <input
              type="text"
              id="newCategory"
              placeholder="輸入新分類名稱..."
              style="display: none"
            />
          </div>
          <div class="form-group">
            <label>標籤</label>
            <input type="text" id="kaomojiTags" placeholder="例如：無奈,思考" />
          </div>
        </div>
        <div class="modal-footer">
          <button
            id="deleteBtn"
            class="btn-pill danger"
            style="display: none; margin-right: auto"
          >
            <i class="fa-solid fa-trash"></i> 刪除
          </button>
          <button id="cancelAdd" class="btn-pill secondary">取消</button>
          <button id="confirmAdd" class="btn-pill primary">確認</button>
        </div>
      </div>
    </div>

    <!-- About Modal -->
    <div id="aboutModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3><i class="fa-solid fa-circle-info"></i> 關於</h3>
          <button class="close-btn" id="closeAbout">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </div>
        <div class="modal-body" style="text-align: center">
          <h2 style="font-size: 18px; margin-bottom: 2px">饅頭顏文字小工具</h2>

          <svg
            width="272"
            height="192"
            viewBox="0 0 272 192"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            style="fill: var(--primary); width: 100px; height: 120px"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M102.83 0.694226C107.698 -1.3997 113.757 1.35249 114.935 7.47548C115.352 9.63946 115.741 12.24 116.016 15.0995C118.689 11.4385 121.903 8.03527 125.11 5.76063C127.59 4.00225 129.919 2.51825 132.115 2.01747C133.278 1.75235 134.472 1.74268 135.654 2.14149C136.826 2.53693 137.83 3.28027 138.712 4.26161C139.597 5.24737 140.234 6.3511 140.454 7.58485C140.678 8.84312 140.433 10.0404 139.89 11.1259C138.868 13.1659 136.716 14.9611 134.184 16.6405C133.291 17.2335 132.392 17.8664 131.49 18.5409C132.537 18.5203 133.591 18.5097 134.65 18.5097C241.224 18.51 267.746 115.362 270.373 133.671C273.105 152.713 272.194 166.314 262.175 177.195C254.159 185.9 241.224 191.704 222.096 191.704H57.2236C32.6298 191.704 14.1107 188.27 7.12492 177.195C-13.396 144.661 9.84113 55.9411 84.2441 27.4481C81.4848 27.1639 79.0058 26.3752 77.2968 24.8515C76.2988 23.9614 75.5798 22.8315 75.2655 21.4843C74.955 20.1525 75.0695 18.7353 75.5185 17.2938C76.0918 15.4537 76.9642 13.3208 79.1152 12.0956C81.2201 10.8969 84.0402 10.8524 87.7538 11.6825C90.4572 12.2869 93.9293 13.6891 97.3642 15.3016C98.7211 15.9387 100.092 16.6186 101.433 17.3104C100.688 16.0782 99.8472 14.6825 98.9101 12.911C96.7087 8.74952 97.8279 2.8464 102.83 0.694226ZM42.7323 88.4354C26.0537 88.4354 15.4404 125.415 15.4404 147.302C15.4404 162.396 21.5049 172.962 40.4579 172.962C60.9272 172.962 67.7499 166.169 67.7499 147.302C67.7499 128.434 59.411 88.4355 42.7323 88.4354Z"
            />
          </svg>

          <p
            style="color: var(--text-sub); font-size: 12px; margin-bottom: 4px"
          >
            作者：Mant0u
          </p>
          <p
            style="color: var(--text-sub); font-size: 12px; margin-bottom: 16px"
          >
            AI 工具：Gemini 3 Pro
          </p>

          <div
            style="
              background: var(--bg-body);
              padding: 12px;
              border-radius: 8px;
              text-align: left;
              font-size: 13px;
              line-height: 1.6;
            "
          >
            <p>這是一個簡單的顏文字與符號的管理工具。</p>
            <p>• 可以點選下方分類切換</p>
            <p>• 點擊顏文字按鈕即可複製</p>
            <p>• 支援自訂顏文字，可將記錄匯出與匯入</p>
          </div>
        </div>
      </div>
    </div>

    <!-- 假設你的資料檔路徑是正確的 -->
    <script src="../data/kaomoji-data.js"></script>
    <script src="../data/symbols-data.js"></script>
    <script src="../data/emoji-data.js"></script>
    <script src="popup.js"></script>
  </body>
</html>
