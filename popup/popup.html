<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@500;700;900&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="popup.css" />
    <title>顏文字小工具</title>
  </head>
  <body>
    <input type="file" id="importInput" accept=".json" style="display: none" />

    <div class="container">
      <!-- Header -->
      <div class="header">
        <div class="random-wrapper">
          <div id="randomDisplay" class="random-kaomoji" title="點擊切換">Loading...</div>
          <button id="copyRandomBtn" class="copy-random-btn" title="複製">
            <i class="fa-regular fa-copy"></i>
          </button>
        </div>

        <div class="search-box">
          <i class="fa-solid fa-magnifying-glass search-icon"></i>
          <input type="text" id="searchInput" placeholder="搜尋..." />
          <button id="clearSearch"><i class="fa-solid fa-xmark"></i></button>
        </div>
      </div>

      <!-- Tabs -->
      <div class="category-wrapper" id="categoryWrapper">
        <div class="category-tabs" id="categoryTabs"></div>
      </div>

      <!-- Content -->
      <div class="kaomoji-grid-wrapper">
        <div class="kaomoji-grid" id="kaomojiGrid"></div>
      </div>

      <!-- Footer -->
      <div class="footer">
        <div id="copyMessage" class="copy-message"><i class="fa-solid fa-check"></i> 已複製</div>

        <div class="footer-controls">
          <div class="btn-group">
            <button id="infoBtn" class="btn-icon" title="關於">
              <i class="fa-solid fa-circle-info"></i>
            </button>
            <div class="stats-info">總數：<span id="totalCount">0</span></div>
          </div>

          <div class="action-buttons">
            <div class="btn-group">
              <button id="clearHistory" class="btn-icon danger" title="清除紀錄">
                <i class="fa-solid fa-trash-can"></i>
              </button>
              <button id="importBtn" class="btn-icon" title="匯入">
                <i class="fa-solid fa-file-import"></i>
              </button>
              <button id="exportBtn" class="btn-icon" title="匯出">
                <i class="fa-solid fa-file-export"></i>
              </button>
            </div>
            <button id="addKaomoji" class="btn-pill primary" title="新增"><i class="fa-solid fa-plus"></i> 新增</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Add/Edit Modal -->
    <div id="addModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modalTitle"><i class="fa-solid fa-pen-to-square"></i> 新增顏文字</h3>
          <button class="close-btn" id="closeModal"><i class="fa-solid fa-xmark"></i></button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>顏文字符號</label>
            <textarea id="kaomojiSymbol" placeholder="( ˘•ω•˘ )" rows="2"></textarea>
          </div>
          <div class="form-group">
            <label>分類</label>
            <div class="select-wrapper">
              <select id="kaomojiCategory">
                <option value="">選擇分類</option>
              </select>
            </div>
            <input type="text" id="newCategory" placeholder="輸入新分類名稱..." style="display: none" />
          </div>
          <div class="form-group">
            <label>標籤</label>
            <input type="text" id="kaomojiTags" placeholder="例如：無奈,思考" />
          </div>
        </div>
        <div class="modal-footer">
          <button id="deleteBtn" class="btn-pill danger" style="display: none; margin-right: auto">
            <i class="fa-solid fa-trash"></i> 刪除
          </button>
          <button id="cancelAdd" class="btn-pill secondary">取消</button>
          <button id="confirmAdd" class="btn-pill primary">確認</button>
        </div>
      </div>
    </div>

    <!-- About Modal -->
    <div id="aboutModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3><i class="fa-solid fa-circle-info"></i> 關於</h3>
          <button class="close-btn" id="closeAbout"><i class="fa-solid fa-xmark"></i></button>
        </div>
        <div class="modal-body" style="text-align: center">
          <h2 style="font-size: 18px; margin-bottom: 2px">饅頭顏文字小工具</h2>
          <p style="color: var(--text-sub); font-size: 12px; margin-bottom: 16px">作者：Mant0u</p>
          <div
            style="
              background: var(--bg-body);
              padding: 12px;
              border-radius: 8px;
              text-align: left;
              font-size: 13px;
              line-height: 1.6;
            "
          >
            <p>這是一個簡單好用的顏文字管理工具。</p>
            <p>• 點擊左上角編輯自訂顏文字</p>
            <p>• 點擊上方隨機顏文字可切換，右側按鈕可複製</p>
            <p>• 支援匯出與匯入備份</p>
          </div>
        </div>
      </div>
    </div>

    <!-- 假設你的資料檔路徑是正確的 -->
    <script src="../data/kaomoji-data.js"></script>
    <script src="popup.js"></script>
  </body>
</html>
